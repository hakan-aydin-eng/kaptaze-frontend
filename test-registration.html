<!DOCTYPE html>
<html>
<head>
    <title>Test Registration Data</title>
</head>
<body>
    <h1>Test Restoran Başvurusu Ekleme</h1>
    <button onclick="addTestRegistration()">Test Başvurusu Ekle</button>
    <button onclick="clearRegistrations()">Başvuruları Temizle</button>
    <button onclick="showRegistrations()">Başvuruları Göster</button>
    
    <div id="output"></div>

    <script>
        function addTestRegistration() {
            const testRegistration = {
                id: Date.now().toString(),
                type: 'restaurant',
                firstName: 'Test',
                lastName: 'Restoran',
                email: 'test@restaurant.com',
                phone: '0532 123 45 67',
                businessName: 'Test Restaurant - Mobile',
                businessCategory: 'Geleneksel Türk',
                businessAddress: 'Test Mahallesi, Test Sokak No:1',
                city: 'Antalya',
                district: 'Muratpaşa',
                restaurantUsername: 'testmobile',
                restaurantPassword: 'test123',
                terms: true,
                status: 'approved', // Direkt approved olarak ekle
                createdAt: new Date().toISOString(),
                approvedAt: new Date().toISOString()
            };
            
            const testPackage = {
                id: 'pkg_' + Date.now(),
                name: 'Mobile Test Paketi',
                description: 'Mobil uygulama test paketi',
                originalPrice: 120,
                discountPrice: 75,
                quantity: 3,
                category: 'Ana Yemek',
                expiryTime: '20:00',
                restaurantId: testRegistration.id,
                createdAt: new Date().toISOString()
            };
            
            const registrations = JSON.parse(localStorage.getItem('registrations') || '[]');
            const packages = JSON.parse(localStorage.getItem('restaurantPackages') || '[]');
            
            registrations.push(testRegistration);
            packages.push(testPackage);
            
            localStorage.setItem('registrations', JSON.stringify(registrations));
            localStorage.setItem('restaurantPackages', JSON.stringify(packages));
            
            document.getElementById('output').innerHTML = '<p style="color: green;">Test başvurusu + paket eklendi! (Status: approved)</p>';
            
            // Mobil uygulamaya da cross-domain mesaj gönder
            try {
                window.postMessage({
                    type: 'NEW_RESTAURANT_DATA',
                    data: { restaurant: testRegistration, package: testPackage }
                }, '*');
            } catch (e) {
                console.log('Cross-domain message failed:', e);
            }
        }
        
        function clearRegistrations() {
            localStorage.removeItem('registrations');
            document.getElementById('output').innerHTML = '<p style="color: red;">Tüm başvurular temizlendi!</p>';
        }
        
        function showRegistrations() {
            const registrations = JSON.parse(localStorage.getItem('registrations') || '[]');
            document.getElementById('output').innerHTML = '<pre>' + JSON.stringify(registrations, null, 2) + '</pre>';
        }
    </script>
</body>
</html>