{
  "permissions": {
    "allow": [
      "Bash(git -C /c/Users/hakan/KapTazeApp/kaptaze-backend-api commit -m \"$(cat <<''EOF''\nFIX: Complete automatic package deactivation system\n\n- Added missing auto-deactivation logic to root /orders endpoint\n- Packages now automatically become inactive when stock reaches zero\n- Matches behavior already implemented in /orders/create endpoint\n- Completes package lifecycle management: active â†’ zero stock â†’ inactive â†’ reactivatable\n- Ensures consistent stock management across all order creation endpoints\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git -C /c/Users/hakan/KapTazeApp/web status)",
      "Bash(git -C /c/Users/hakan/KapTazeApp/web push)",
      "Bash(npm install:*)",
      "Bash(git -C /c/Users/hakan/KapTazeApp/kaptazeuygulama add package.json src/context/UserDataContext.js)",
      "Bash(git -C /c/Users/hakan/KapTazeApp/kaptazeuygulama commit -m \"FEAT: Add real-time order status synchronization to mobile app\n\n- Added Socket.IO client integration for real-time updates\n- Mobile app now listens for order status changes from restaurant panel\n- Automatic Socket.IO connection management when user logs in/out\n- Order status updates are received instantly and saved to local storage\n- Fixed order status sync between restaurant panel and mobile app\n- Status flow: pending â†’ confirmed â†’ ready â†’ completed now works both ways\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(git -C /c/Users/hakan/KapTazeApp/web add admin-pro-dash-v2.html js/notification-manager.js)",
      "Bash(git -C /c/Users/hakan/KapTazeApp/web commit -m \"FEAT: Add push notification management system to admin panel\n\n- Added Bildirimler (Notifications) menu to admin dashboard\n- Complete notification management interface with stats and history\n- Support for different notification types: genel, promosyon, ÅŸehir, restoran\n- Notification form with title, message, type, and priority selection\n- Mock notification history table with delivery stats\n- Ready for FCM/APNs backend integration\n- Professional admin UI for push notification campaigns\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(npm run dev:*)",
      "Bash(curl:*)",
      "Bash(eas build:*)",
      "Bash(eas project:info:*)",
      "Bash(copy assetsicon.png assetsnotification-icon.png)",
      "Bash(git push:*)",
      "Bash(eas submit:*)",
      "Bash(node:*)",
      "WebFetch(domain:www.toogoodtogo.com)",
      "Bash(cat:*)",
      "Bash(sed:*)",
      "Bash(taskkill:*)",
      "Bash(netstat:*)",
      "Bash(findstr:*)",
      "Bash(git -C ../kaptaze-backend-api add routes/auth.js)",
      "Bash(git -C ../kaptaze-backend-api commit -m \"FIX: Backend push token parsing issue with enhanced debugging\n\n- Fixed undefined req.body.token issue in push notification endpoints\n- Added comprehensive debugging for push token requests  \n- Enhanced middleware to handle both /push-token and /push-token-v2 endpoints\n- Added rawBody parsing fallback when JSON body is empty\n- Added detailed logging for content-type, body length, and parsing attempts\n- This fixes the critical blocking issue preventing push notifications from working\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(PORT=3002 npm run dev)",
      "Bash(npm uninstall:*)",
      "Bash(eas init:*)",
      "Bash(git -C ../kaptaze-backend-api status)",
      "Bash(git -C ../kaptaze-backend-api add services/pushNotificationService.js)",
      "Bash(git -C ../kaptaze-backend-api commit -m \"FIX: Firebase environment variables support for Render deployment\n\n- Support both full JSON and separate environment variables \n- Handle split private keys for Render deployment\n- Improved Firebase initialization logging\n- Fixes push notifications for production deployment\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(git -C ../kaptaze-backend-api push)",
      "Bash(git -C ../kaptaze-backend-api commit -m \"FEAT: Add Base64 Firebase private key support for Render\n\n- Support Base64 encoded private keys to avoid newline issues\n- Better error handling and logging for key decoding\n- Maintains backward compatibility with existing methods\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(git -C ../kaptaze-backend-api add server.js services/pushNotificationService.js)",
      "Bash(git -C ../kaptaze-backend-api commit -m \"$(cat <<''EOF''\nFIX: Critical push notification issues for iOS and Firebase\n\n- Fixed iOS push token parsing issue where text/plain content-type caused empty body\n- Added support for text/plain content type in Express middleware\n- Added comprehensive Firebase environment variable debugging\n- Now supports FIREBASE_SERVICE_ACCOUNT_BASE64 for full service account\n- Fixed Firebase initialization priority: Base64 â†’ Full JSON â†’ Separate vars\n- Enhanced logging to diagnose Render deployment issues\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git -C ../kaptaze-backend-api add firebase.json services/pushNotificationService.js)",
      "Bash(git -C ../kaptaze-backend-api commit -m \"FEAT: Add firebase.json file support for easy deployment\n\n- Firebase service account now loads from firebase.json file first\n- Much easier than environment variables for complex JSON\n- Fallback to Base64 and other env methods still available\n- Should fix Firebase initialization on Render\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(git -C ../kaptaze-backend-api reset --soft HEAD~1)",
      "Bash(git -C ../kaptaze-backend-api add .gitignore services/pushNotificationService.js)",
      "Bash(git -C ../kaptaze-backend-api commit -m \"FEAT: Add firebase.json support + Update gitignore\n\n- Added firebase.json file loading capability  \n- Firebase service account loads from file first, then env vars\n- Added Firebase files to .gitignore for security\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(git -C ../kaptaze-backend-api rm --cached firebase.json)",
      "Bash(git -C ../kaptaze-backend-api commit -m \"FEAT: Enhanced Firebase support and security\n\n- Added firebase.json file loading for easier deployment\n- Enhanced environment variable debugging  \n- Added Firebase files to .gitignore for security\n- Improved Firebase initialization with multiple fallback methods\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(git -C ../kaptaze-backend-api commit -m \"DEBUG: Add detailed logging for push notification failures\n\n- Added consumer query logging to see which users match preferences\n- Added token-by-token debug info with platform and partial token\n- Added Firebase SDK status logging before sending\n- Enhanced error logging with detailed error codes and messages\n- This will help identify why notifications are failing to send\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(git -C ../kaptaze-backend-api commit -m \"FIX: Remove unsupported icon field from FCM notifications\n\n- Fixed Firebase FCM v1 API compatibility issue\n- Moved icon to data field instead of notification field  \n- FCM v1 API doesn''t support icon in notification payload\n- Icon now passed as data for client-side handling\n- This fixes: Invalid JSON payload received. Unknown name ''icon''\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(git -C ../kaptaze-backend-api add services/pushNotificationService.js package.json)",
      "Bash(git -C ../kaptaze-backend-api commit -m \"FIX: Filter out incompatible Expo tokens from FCM notifications\n\n- Added Expo token detection and filtering before sending to FCM\n- Only valid FCM tokens are now sent to Firebase messaging\n- Expo tokens are skipped with clear logging for debugging\n- Updated response to track valid vs skipped token counts\n- This fixes: ''The registration token is not a valid FCM registration token''\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(find:*)",
      "Bash(git -C ../kaptaze-backend-api commit -m \"FEAT: Add comprehensive favorite restaurant API endpoints\n\n- Added GET /auth/favorites to retrieve user''s favorite restaurants\n- Added POST /auth/favorites/:restaurantId to add restaurant to favorites  \n- Added DELETE /auth/favorites/:restaurantId to remove from favorites\n- Full authentication and authorization checks for consumer users\n- Database population of restaurant data in response\n- Proper error handling and logging for all operations\n- Backend supports persistent favorites per user account\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(git -C ../kaptazeuygulama add src/services/apiService.js src/context/UserDataContext.js)",
      "Bash(git -C ../kaptazeuygulama commit -m \"FEAT: Add real-time favorite synchronization with backend\n\n- Updated apiService with comprehensive favorite API functions\n- Modified UserDataContext to sync favorites with backend database\n- Favorites now persist across app sessions and devices\n- Local favorites automatically sync with server on user login\n- Backend API integration for add/remove favorite operations\n- Fallback to local storage when backend is unavailable\n- Enhanced error handling and logging for favorite operations\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(git -C ../kaptaze-backend-api add routes/restaurant.js)",
      "Bash(git -C ../kaptaze-backend-api commit -m \"FEAT: Enhanced favorite restaurant package notifications\n\n- Updated notification message to be more engaging and personal\n- Changed from ''yeni paket ekledi!'' to ''beklediÄŸin sÃ¼priz paketi ekledi ðŸ˜±''\n- Added call-to-action: ''Hadi gidelim! ðŸš€''\n- More compelling messaging to drive user engagement\n- Maintains same functionality with better user experience\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(git -C ../kaptazeuygulama add src/screens/MainScreen.js)",
      "Bash(git -C ../kaptazeuygulama commit -m \"FEAT: Add real-time restaurant search functionality\n\n- Integrated backend search API with frontend search input\n- Added debounced search (500ms) for better performance\n- Search now queries backend for restaurant name, category, and description\n- Removed local search filtering in favor of backend API search\n- Real-time search results as user types in search bar\n- Enhanced user experience with instant restaurant discovery\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(npx expo start:*)",
      "WebFetch(domain:kaptaze.com)",
      "Bash(git -C ../kaptaze-backend-api add models/NotificationLog.js routes/admin.js routes/auth.js services/pushNotificationService.js)",
      "Bash(git -C ../kaptaze-backend-api commit -m \"FEAT: Complete notification logging and analytics system\n\n- Added NotificationLog model for comprehensive notification tracking\n- Added /admin/notification-stats endpoint with aggregated analytics\n- Added /admin/notification-history endpoint with pagination\n- Enhanced pushNotificationService with automatic logging\n- Fixed auth endpoints to use req.user.id instead of req.user._id\n- Complete backend support for admin panel notification dashboard\n- Tracks delivery rates, success/failure counts, targeting data, and performance metrics\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(git -C ../kaptaze-backend-api add routes/admin.js)",
      "Bash(git -C ../kaptaze-backend-api commit -m \"FIX: Remove auth middleware from notification endpoints to match existing pattern\n\n- Removed authenticate/authorize middleware from notification-stats and notification-history endpoints\n- Matches the pattern used by other working admin endpoints like /admin/stats\n- Fixes 403 Forbidden errors in admin panel notification dashboard\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(git -C ../kaptaze-backend-api commit -m \"DEBUG: Add detailed logging for favorite restaurant notifications\n\n- Added debug logging to see which consumers are found\n- Shows consumer details and favorite restaurants array\n- Will help diagnose why only 1 consumer receives notification\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(MONGODB_URI=$MONGODB_URI node scripts/bulkMigration.js)"
    ],
    "deny": [],
    "ask": [],
    "additionalDirectories": [
      "C:\\Users\\hakan\\KapTazeApp\\kaptaze-backend-api",
      "C:\\Users\\hakan\\KapTazeApp",
      "C:\\c\\Users\\hakan\\KapTazeApp"
    ]
  }
}